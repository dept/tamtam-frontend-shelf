{#
    Image macro

    data {
        classes: 'string', (optional)
        preload: 'string',
        image: 'string', (optional)
        srcset: 'string', (optional, for responsive images)
        alt: 'string',
        caption: 'string', (optional)
        hidden: boolean, (optional)
        objectFit: boolean, (optional)
        attr: 'string, (optional)
        customDataSrc: 'string', (optional)
    }
 #}

{% macro image(data) %}

    <figure class="c-image
        {%- if data.classes %} {{ data.classes }}{% endif -%}"
        {%- if data.objectFit %} js-hook-objectfit{% endif -%}
        {%- if data.attr %} {{ data.attr|safe }}{% endif -%}
    >

      <div class="image__holder">
        <img class="{%- if not data.disableCrossFade %} image__default{% endif -%}"
            data-src="{{ data.image }}"
            {%- if data.preload %} src="{{ data.preload }}"{% endif -%}
            {%- if data.srcset %} data-srcset="{{ data.srcset }}"{% endif -%}
            {%- if data.hidden %} aria-hidden="true"{% endif %}
            {%- if data.customDataSrc %} {{ data.customDataSrc|safe }}{% endif %}
            alt="{{ data.alt or 'Image' }}"
        >
      </div>

      {%- if data.caption %}
      <figcaption class="image__caption">
          {{ data.caption }}
      </figcaption>
      {% endif -%}

    </figure>

{% endmacro %}
